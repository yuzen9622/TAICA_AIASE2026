# 生成式 AI 應用系統與工程 (AIASE 2026 W1)

> Generative AI Application Systems and Engineering
> 莊坤達 Kun-Ta Chuang | 國立成功大學 資訊工程學系

---

## 課程概述：生成式 AI 應用系統開發

### 四大面向

- **系統開發流程**：從需求分析、系統設計到實作與部署，貫穿軟體工程 SDLC，確保應用系統的穩健性與可擴展性
- **關鍵技術與工具**：涵蓋前後端技術、資料流程、開源 CI/CD、MLOps/LLMOps、AWS 雲端環境、分散式 AI Infra，以及 LiteLLM/OpenRouter 等模型代理
- **LLM 深度應用**：LLM 微調、Local LLM 評測、Agent 工作流、MCP/ADK/Agent-to-Agent 架構，Token 經濟學與 Prompt 優化
- **實務與挑戰**：多輪對話設計、幻覺減少、LLM 資安議題，至少六次程式作業與期末專題

### 課程核心能力

- **系統架構設計**：前後端 + LLM 層架構、SDLC 需求分析、Microservice 切分
- **Full Stack 端到端開發**
- **MLOps / LLMOps**：Kafka → Airflow → Iceberg、CI/CD Pipeline、模型監控與測試
- **雲端部署 & RAG**：AWS EC2/ECS/Lambda、向量資料庫與檢索、RAG Pipeline 實作
- **Local LLM & 微調**：vLLM / Ollama 部署、Ray 分散式工作流、Model as Microservice
- **Agent Workflow**：Planner/Tool/Critic、MCP / ADK 整合、Multi-Agent 協作
- **LLM 資安防護**：Prompt Injection 防策、Policy Engine 設計、審計與權限管理
- **觀測性優化**：Logs/Metrics/Tracing、延遲與成本優化、A/B Testing

---

## AI 教學框架：三層式架構 (Three-Tiered Framework)

1. **禁止使用 (Prohibit)**：適用於需培養基礎技能或核心知識的課程
2. **有條件開放 (Allow with attribution)**：允許使用 AI 作為輔助工具，須明確揭露使用方式
3. **鼓勵使用 (Encourage)**：適用於高階課程，鼓勵利用 AI 探索創造性思維或處理複雜分析

---

## 教學目標

1. **整體架構理解**：理解生成式 AI 應用系統的整體架構（前端、後端、LLM 層、Agent 工作流與資料流）
2. **SDLC 實務應用**：熟悉 SDLC 在生成式 AI 專案中的實務流程，能撰寫系統需求與高階架構設計
3. **RAG 系統建構**：運用 Web 架構、AWS 平台、資料庫與向量檢索技術，建構具 RAG 能力的應用系統
4. **MLOps/LLMOps 整合**：整合 MLOps/LLMOps toolchain（CI/CD、模型部署、評估與觀測）
5. **Agent Workflow 掌握**：掌握 Agent workflow、MCP、ADK 與 agent-to-agent 概念，透過 callbacks 實作安全與審計邏輯
6. **Token 經濟學與對話設計**：理解 token 經濟學、多輪對話設計與幻覺減少策略
7. **LLM 資安防護**：設計與實作基本的 LLM 資安防護（prompt injection 防禦與 response auditing）
8. **期末專題實作**：完成一項可展示的生成式 AI 應用系統期末專題

---

## 課程需知 (Prerequisite)

- 以成大資訊工程研究所研究生應有基礎為前提
- 不回應平台差異上的執行問題（Mac, Linux, Windows）
- 不回應 Python 的套件/安裝/語法等議題
- 不會手把手教學任何授課所提系統的操作細節
- 不回應 GitHub 平台的操作、git 指令、套件的 dependency 等問題

---

## 課程時間表

| 週次 | 日期 (週三) | 課程進度 / 主題摘要 | 備註 |
|------|-----------|-----------------|------|
| 01 | 02/25 | Course Agenda | 學期開始 |
| 02 | 03/04 | 全端架構基礎掌握 GenAI UI/UX 與後端微服務通訊 | |
| 03 | 03/11 | | |
| 04 | 03/18 | | |
| 05 | 03/25 | 單元 (四)：專題案例分析 | |
| 06 | 04/01 | 放假 (清明連假/校際活動預留) | 4/4 清明節 |
| 07 | 04/08 | 放假 (清明連假/校際活動預留) | 校際活動日(停課) |
| 08 | 04/15 | 期中專案討論 / 複習週 | |
| 09 | 04/22 | 期中考試 / 期中報告 | Midterm |
| 10 | 04/29 | Core of Data Pipeline - Kafka/Iceberg/Airflow | Apache Taipei Funder |
| 11 | 05/06 | 單元 (七)：系統架構與設計 | |
| 12 | 05/13 | 單元 (八)：新技術趨勢分享 | |
| 13 | 05/20 | 專題研究 I：文獻與工具 | |
| 14 | 05/27 | 專題研究 II：小組協作 | |
| 15 | 06/03 | 單元 (九)：優化與測試 | |
| 16 | 06/10 | 期末成果發表 | |
| 17 | 06/17 | 期末成果發表 | |
| 18 | 06/24 | 期末成果發表 | |

---

## Course Landscape（技術層級堆疊）

- **L0 硬體與基礎設施 | Infrastructure**：NVIDIA A100/H100、Kubernetes、Docker、GPU Operator、KubeRay、Ray Autoscaler
- **L1 模型訓練與微調 | Training & Fine-tuning**：Transformers、DeepSpeed、LoRA/QLoRA、Unsloth、Ray Train、W&B、MLflow
- **L2 模型服務與推論 | Model Serving & Inference**：vLLM、TensorRT-LLM、TGI、llama.cpp、Ollama、Ray Serve、Triton、BentoML
- **L3 LLM 閘道與路由 | API Gateway / Routing**：LiteLLM、Portkey、pi-ai、Martian
- **L4 資料與向量儲存 | Data & Vector Storage**：Pinecone、Weaviate、Milvus、Qdrant、Chroma、pgvector
- **L5 Agent 框架與編排 | Agent Orchestration**：Pi、LangChain、LangGraph、CrewAI、AutoGen、OpenAI Agents SDK
- **L6 提示工程與管理 | Prompt Management**：Langfuse Prompts、PromptLayer、Humanloop、Pi Templates
- **L7 安全與防護欄 | Security & Guardrails**：Guardrails AI、NeMo Guardrails、LLM Guard、Presidio、Rebuff
- **L8 評估與測試 | Evaluation & Testing**：Langfuse Evals、DeepEval、Ragas、Promptfoo、Garak
- **L9 可觀測性與監控 | Observability & Monitoring**：Langfuse、LangSmith、Phoenix、Helicone、Datadog、OpenTelemetry、Ray Dashboard
- **L10 應用與介面 | Application & Interface**：Pi TUI、pi-web-ui、OpenClaw、Open WebUI、Chatbot UI
- **L11 CI/CD 與部署 | Deployment Pipeline**：GitHub Actions、Argo CD、Terraform、Helm、KubeRay Helm

> 參考：https://ktchuang.github.io/LLMOpsOverview/

---

## 軟體 SDLC 演變

> 參考：https://ktchuang.github.io/SDLCOverview/

### 軟體開發生命週期（SDLC）發生劇變

AI 代理正在從根本上改變軟體開發的每一個環節。工程師的核心價值聚焦於**架構設計、系統設計與策略決策**。

1. **角色轉型**：工程師從「程式碼撰寫者」轉變為「代理調度者」——負責調度代理、評估輸出、提供策略方向
2. **上手時間壓縮**：熟悉新程式庫或專案的時間從數週壓縮至數小時，實現「動態突擊式」人員調配
3. **全端化能力**：AI 填補知識缺口，讓工程師能跨前端、後端、資料庫及基礎設施有效工作

> 案例：Augment Code 的企業客戶利用 Claude 完成了一個原估計需 4–8 個月的專案，僅花了兩週。

### 單一代理進化為協調式團隊

- **任務分解**：將複雜需求拆解為可平行執行的子任務，分配給專業化的代理
- **階層式調度**：主控代理協調多個子代理，監控進度並整合結果
- **同步與版控**：開發環境需處理多個並行代理的狀態與同步貢獻

> 實戰案例：Fountain 透過 Claude 的多代理階層式調度，篩選速度提升 50%、入職速度加快 40%、候選人轉換率提升 2 倍

### 長時運行代理構建完整系統

1. **跨階段迭代**：代理能跨數十個工作階段進行規劃、迭代與改進
2. **專案可行性擴展**：原本不可行的專案變得可行；積累多年的技術債可被系統性消除
3. **加速上市路徑**：創業者可在數天內從構想到部署應用

> 案例：Rakuten 工程師使用 Claude Code 在一次 7 小時的自主運行中，於擁有 1,250 萬行程式碼的 vLLM 開源庫中完成了特定功能實現，數值準確率達 99.9%。

### 透過智慧協作擴展人類監督

- **代理品質控制**：使用 AI 代理審查大規模 AI 生成的輸出
- **智慧求助機制**：代理學會識別需要人類判斷的情境，主動標記不確定性
- **聚焦式人類審查**：從「審查一切」轉向「審查重要事項」

> 協作悖論：工程師報告在約 60% 的工作中使用 AI 並獲得顯著生產力提升，但僅能完全委派極少部分任務。

> 案例：CRED（服務超 1,500 萬用戶）透過 Claude Code 將執行速度提升一倍。

### Agentic Coding 擴展到新介面與新用戶

- **語言障礙消失**：支援擴展至 COBOL、Fortran 等較少見的語言和領域特定語言
- **程式編寫民主化**：網路安全、營運、設計、資料科學等非傳統開發者也能使用 agentic coding
- 案例：**Legora** — 法律 AI 平台使用 Claude Code 加速開發，讓律師無需工程專業知識即可建立自動化工作流程

### 生產力提升重塑軟體開發經濟學

- **27%** 新增工作佔比（AI 輔助工作中原本不會進行的任務）
- **30%** 程式碼交付加速（TELUS 工程團隊）
- **13K+** 自訂 AI 解決方案（TELUS 團隊創建，節省超過 50 萬小時）

### 組織擴展與安全雙面刃

- **非技術用例擴展**：銷售、行銷、法務、營運等團隊獲得自動化能力
  - Zapier：89% 全組織 AI 採用率，部署 800+ 內部代理
  - Anthropic 法務：行銷審查周轉時間從 2–3 天縮短至 24 小時
- **安全攻防新格局**：agentic coding 是雙面刃
  - 安全知識民主化：AI 讓每位工程師都能執行專業級安全審查
  - 內建安全優先：從一開始就嵌入安全性

### 四大優先事項

1. **掌握多代理協調**：建構多代理工作流程（任務分解策略、專業化代理設計、穩健的協調協議）
2. **擴展人機監督**：透過 AI 自動化審查系統實現智慧品質控制
3. **延伸到工程以外**：賦能各部門的領域專家直接建構解決方案
4. **從最早期即嵌入安全架構**：將安全性作為代理系統設計的核心組成部分

> 核心結論：2026 年的競爭優勢不在於是否採用 AI，而在於如何系統性地將 agentic coding 融入組織的每一個層面。

---

## AI 時代軟體開發鐵三角

- **FDE/PM (Navigator)**：即時指引方向，確保產品快速進入市場並產生價值（市場洞察、策略規劃、價值驗證、敏捷迭代）
- **Agent Architect (Human Guardian)**：從「寫程式的人」升級為「架構與品質守門員」（系統架構設計、資安防護、代碼品質審查、邏輯驗證）
- **AI Agents (Drivers)**：擔任高速實作的 programmers（自動化編碼、快速原型開發、測試與除錯、持續集成/部署 CI/CD）

---

## SKILL：Agent Skills 核心指南

- **核心原則與運作機制**：漸進式揭露 (Progressive Disclosure)
- **開放標準與可移植性**：技能採開放格式設計，可無縫跨越 Claude AI、API 及多種相容工具使用
- **組合式工作流 (Composability)**：可將多個專業技能組合，處理複雜的自動任務
- **標準結構**：SKILL.md + scripts/ + references/ + assets/
- **指令設計準則**：保持在 500 行內、採用明確的步驟化指令、詳列邊界案例與依賴環境

---

## Token 經濟學

- Google API 費用案例：Gemini 2.5 Flash 「思考」產出 183 美金帳單
- OpenClaw 每日燒 $35-40/day 的成本問題
- 使用 AI 工具的隱藏成本風險

---

## AI Abuse and Security Threat

- AI 系統的安全威脅與濫用案例
- 20 分鐘駭入 ChatGPT 和 Google AI 系統（BBC News 中文報導）

---

## 課程評分標準 (Grading Policy)

| 評分項目 | 佔比 | 說明 |
|--------|------|------|
| 作業 (Homework 1–6) | ___% | 共 6 次作業 |
| 期末專題 (Final Project) | ___% | 完整的生成式 AI 應用系統 |
| 課堂參與 (Participation) | ___% | 出席、討論、同儕互評等 |
| 總計 | 100% | |

- 遲交政策：Rank 0

---

## 第一章：資訊科系學生為何需要學習 Markdown？

### 1.1 — 什麼是 Markdown？

- 由 John Gruber 於 2004 年設計的輕量級標記語言
- 核心設計理念：「即使不經過任何渲染，純文字本身也應保持完整的可讀性。」
- 廣泛應用於：GitHub README、Jupyter Notebooks、Notion / Obsidian、Hugo / Jekyll 靜態網站

### 1.2 — Markdown 在語言光譜中的位置

- 語言光譜（由高抽象到低抽象）：
  - Natural Language → 最高抽象，不確定、模糊
  - **Markdown** → 可讀性優先，為人類閱讀與 AI 解析而結構化文字 (**Semantic ↔ Syntax Boundary**)
  - YAML, JSON → 資料結構化，系統配置與參數傳遞
  - TeX / LaTeX → 邏輯精確，學術排版 (**Content ↔ Logic Boundary**)
  - SPSS, R, Matlab → 問題導向，高度抽象的數學/統計邏輯
  - Python, Java → 過程導向，強調開發效率與多功能性
  - C / C++, Rust → 效能與控制，手動記憶體管理 (**Virtual ↔ Physical Boundary**)
  - Assembly (x86, ARM) → 硬體映射，每條指令對應 CPU opcode
  - Binary (0 & 1) → 物理執行，機器唯一直接執行的格式
- 核心洞察：LLM 的訓練語料庫中包含大量 Markdown 格式文字，LLM 對 Markdown 語法具備原生的流暢理解能力

### 1.3 — Markdown 作為 AI 溝通語言的三大優勢

#### 優勢一：結構即語意

- Markdown 的標題層級（#、##、###）自然形成語意樹狀結構
- AI 模型利用這棵樹判斷頂層指令 vs. 補充細節
- `#` 標題的權重永遠高於 `##`，AI 從訓練資料中已隱性理解

#### 優勢二：低語法雜訊

- 相比 XML 風格，Markdown 的訊號雜訊比明顯更高
- 對人類更容易撰寫、閱讀與維護
- AI 解析層級結構和優先順序的準確度不減

#### 優勢三：漸進式精確化

1. 從自然語言開始 — 先用白話文寫下初步想法
2. 加入標題建立層次 — 用 `#` 和 `##` 標題標記主要區塊
3. 用清單與約束條件精煉內容 — 轉化為具體清單，粗體標示關鍵規則，加入範例

---

## 第二章：Markdown 核心語法 — 快速參考

### 2.1 — 文字格式

| 語法 | 原始碼 | AI 溝通用途 |
|------|--------|------------|
| 標題 | `# H1 / ## H2 / ### H3` | 建立層次化的指令結構 |
| 粗體 | `**key point**` | 強調關鍵規則或限制條件 |
| 斜體 | `*note*` | 標記次要補充說明 |
| 粗體＋斜體 | `***critical***` | 標記絕對不可違反的限制 |
| 刪除線 | `~~deprecated~~` | 標記已移除的規則（版本控管用） |
| 行內程式碼 | `` `variableName` `` | 標記專有名詞、指令與格式標記 |

### 2.2 — 結構化元素

| 語法 | 原始寫法 | AI 溝通用途 |
|------|--------|------------|
| 有序清單 | `1. Step one` | 定義循序流程（順序有意義） |
| 無序清單 | `- Item` | 定義並列條件（無優先順序） |
| 巢狀清單 | 縮排 2–4 個空格 | 表達從屬或相依關係 |
| 區塊引用 | `> quoted text` | 標註背景資訊、角色設定、注意事項 |
| 分隔線 | `---` | 區隔不同的指令段落 |
| 表格 | `\| Col \| Col \|` | 定義對應關係、輸入/輸出對照 |
| 程式碼區塊 | ` ``` lang ` | 提供範例程式碼或預期的輸出格式 |

> 實用技巧：有序清單傳達順序概念（依序執行），無序清單傳達並列條件（同等適用）

### 2.3 — 進階元素（常見於系統提示詞）

- **任務清單**：`- [ ]` 未完成 / `- [x]` 已完成 → 定義 AI 必須逐一完成的項目
- **錨點 / 標籤**：`<!-- SECTION:rules -->` → 在長篇提示詞中建立可引用的章節標記
- **跳脫字元**：`\*not bold\*` → 防止 AI 誤將特殊符號解讀為格式指令
- **HTML 標籤**：`<details>` / `<summary>` → 建立可折疊區塊

---

## 第三章：實戰應用 — 用 Markdown 撰寫系統提示詞

### 範例一：基本角色定義

- 結構：`# 角色定義` → `## 原則與限制` → 清單項目（具體規則）
- 設計模式：角色 → 面向 → 規則（三層結構）

### 範例二：含流程控制的 Prompt

- 角色定義 + 審查順序（安全性 → 正確性 → 可讀性）
- 以表格定義輸出格式（嚴重度 / 類別 / 問題 / 修正方式）

### 範例三：多情境分支（進階）

- 使用 `###` 標題建立情境分支：
  - 情境 A：小型專案（MVP）— 速度 > 最佳實踐
  - 情境 B：正式產品開發 — 可維護性 > 開發速度
  - 情境 C：除錯 / 故障排除 — 準確 > 速度
- 使用 `- [ ]` 任務清單傳達必要的未知資訊

---

## 第四章：常見錯誤與最佳實踐

### 4.1 — 常見錯誤一覽

| 錯誤類型 | 問題所在 | 改善方式 |
|---------|---------|---------|
| 指令扁平化 | AI 無法區分優先順序 | 使用標題層級建立語意樹狀結構 |
| 過度巢狀 | AI 對深層結構注意力下降 | 控制在 3 層以內 |
| 模糊的描述 | 缺乏可量測的定義 | 提供具體數值（如 200–500 characters） |
| 規則相互矛盾 | AI 在衝突指令間游移 | 明確設定優先順序或限定情境 |
| 缺乏範例 | AI 詮釋可能與預期不符 | 至少提供一組輸入/輸出範例 |
| 隱含的假設 | AI 的「慣例」與你的不同 | 明確說明預設技術堆疊與標準 |

### 4.2 — 讓 AI 理解你的七大原則

1. **層級即優先順序**：`#` 的權重高於 `##`，善用層級表達優先順序
2. **明確優於隱含**：將「保持專業」替換為具體規則
3. **可驗證的約束條件**：每個函式 ≤30 行、巢狀層級 ≤3 層
4. **範例消除歧義**：至少一個具體的輸入/輸出範例
5. **關注點分離**：角色、規則、格式與約束條件分別放在獨立 `##` 區塊
6. **邊界條件處理**：明確定義輸入不完整、超出範疇、需求矛盾時的應對方式
7. **預設回應格式迴圈**：定義回應模板（理解需求 → 方案提案 → 建議選項 → 後續步驟）

---

## 第五 & 六章：練習題 & 總結

### 課堂練習

- **練習一：重構提示詞** — 將平鋪式指令轉換為結構化 Markdown
- **練習二：除錯提示詞** — 找出結構性問題（縮排不一致、標題層級不合邏輯、規則矛盾）

### 重點回顧

- Markdown 是**最佳中介語言**：恰到好處的結構，既能消除歧義又保留可讀性
- **提示詞即契約**：一份結構化的協作契約——有層次、可驗證、以範例為導向
- **Markdown 解決根本問題**：大多數提示詞錯誤來自結構扁平或語意模糊

### 下一講預告：規格驅動開發（SDD）

- 將提示詞概念擴展到完整的軟體開發生命週期
- 用結構化的規格文件定義要建構什麼、如何驗證
- 讓 AI 根據規格生成程式碼

> 你今天寫的每一個提示詞，都是一份微型規格文件。

---

## 課程系列：AI 協作開發 — 學習路線圖

- **第一講**：Markdown 作為 AI 溝通語言
- **第二講起**：規格驅動開發（SDD）
- **進階階段**：完整的 AI 協作開發工作流程

---

## Homework 1

- **主題**：Decoupling 你的智慧 (markdown) 與美麗 (rendering)
- **作業說明**：https://github.com/ktchuang/TAICA_AIASE2026/blob/main/homeworks/HW1.md
- 遲交政策：Rank 0

---

## 課程討論平台

- **Discord**：Taica 生成式 AI 課程
- 呼叫 TA Agent：`@netdb-agent`
- 不回答基本問題（Python 安裝/語法、平台差異、git 使用、套件 dependency 等），AI Agent可能會回答，但你可以問自己的Gemini/Chatgpt小幫手